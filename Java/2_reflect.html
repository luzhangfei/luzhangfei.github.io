<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>反射 | 卢章斐的笔记</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/assets/css/0.styles.cc2a2ebf.css" as="style"><link rel="preload" href="/assets/js/app.87228582.js" as="script"><link rel="preload" href="/assets/js/7.de8dbbc3.js" as="script"><link rel="prefetch" href="/assets/js/2.413b4e91.js"><link rel="prefetch" href="/assets/js/3.ba107937.js"><link rel="prefetch" href="/assets/js/4.a48cfc41.js"><link rel="prefetch" href="/assets/js/5.6101a530.js"><link rel="prefetch" href="/assets/js/6.1efe7eb3.js"><link rel="prefetch" href="/assets/js/8.12e5cbd6.js"><link rel="prefetch" href="/assets/js/9.e8c58117.js"><link rel="prefetch" href="/assets/js/10.3fe4b9c5.js"><link rel="prefetch" href="/assets/js/11.8d92cab9.js"><link rel="prefetch" href="/assets/js/12.391a92c7.js"><link rel="prefetch" href="/assets/js/13.d7a5a6d1.js"><link rel="prefetch" href="/assets/js/14.9295d419.js"><link rel="prefetch" href="/assets/js/15.ca5b5f04.js"><link rel="prefetch" href="/assets/js/16.f174bfff.js"><link rel="prefetch" href="/assets/js/17.f00fd2b5.js"><link rel="prefetch" href="/assets/js/18.03d4acc8.js"><link rel="prefetch" href="/assets/js/19.4e9576b6.js"><link rel="prefetch" href="/assets/js/20.28699996.js"><link rel="prefetch" href="/assets/js/21.d9946966.js"><link rel="prefetch" href="/assets/js/22.39b5f7f3.js"><link rel="prefetch" href="/assets/js/23.87fc2815.js"><link rel="prefetch" href="/assets/js/24.6f267493.js"><link rel="prefetch" href="/assets/js/25.95bc8e2f.js"><link rel="prefetch" href="/assets/js/26.71267169.js"><link rel="prefetch" href="/assets/js/27.942e7ee8.js"><link rel="prefetch" href="/assets/js/28.7bff9205.js"><link rel="prefetch" href="/assets/js/29.44a073d8.js"><link rel="prefetch" href="/assets/js/30.5cb9be55.js"><link rel="prefetch" href="/assets/js/31.fd2f60ac.js"><link rel="prefetch" href="/assets/js/32.2f243f4c.js"><link rel="prefetch" href="/assets/js/33.ee7dd030.js"><link rel="prefetch" href="/assets/js/34.1000dd23.js"><link rel="prefetch" href="/assets/js/35.021f8629.js"><link rel="prefetch" href="/assets/js/36.002ba0cd.js"><link rel="prefetch" href="/assets/js/37.6edc899c.js"><link rel="prefetch" href="/assets/js/38.b63acc28.js"><link rel="prefetch" href="/assets/js/39.3d1bcdb5.js"><link rel="prefetch" href="/assets/js/40.1b7124fc.js"><link rel="prefetch" href="/assets/js/41.75fb759f.js"><link rel="prefetch" href="/assets/js/42.a3455701.js"><link rel="prefetch" href="/assets/js/43.b47b17c9.js"><link rel="prefetch" href="/assets/js/44.5bd8d19e.js"><link rel="prefetch" href="/assets/js/45.b49eaf0c.js"><link rel="prefetch" href="/assets/js/46.ef65ee01.js">
    <link rel="stylesheet" href="/assets/css/0.styles.cc2a2ebf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">卢章斐的笔记</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Java/" class="nav-link router-link-active">Java</a></div><div class="nav-item"><a href="/JavaScript/" class="nav-link">JavaScript</a></div><div class="nav-item"><a href="/Tools/" class="nav-link">Tools</a></div><div class="nav-item"><a href="/DataBase/" class="nav-link">DataBase</a></div><div class="nav-item"><a href="/Other/" class="nav-link">Other</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Java/" class="nav-link router-link-active">Java</a></div><div class="nav-item"><a href="/JavaScript/" class="nav-link">JavaScript</a></div><div class="nav-item"><a href="/Tools/" class="nav-link">Tools</a></div><div class="nav-item"><a href="/DataBase/" class="nav-link">DataBase</a></div><div class="nav-item"><a href="/Other/" class="nav-link">Other</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/Java/1_annotations.html" class="sidebar-link">注解</a></li><li><a href="/Java/2_reflect.html" class="active sidebar-link">反射</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Java/2_reflect.html#反射的定义与作用" class="sidebar-link">反射的定义与作用</a></li><li class="sidebar-sub-header"><a href="/Java/2_reflect.html#实现反射的基础" class="sidebar-link">实现反射的基础</a></li><li class="sidebar-sub-header"><a href="/Java/2_reflect.html#class" class="sidebar-link">Class</a></li><li class="sidebar-sub-header"><a href="/Java/2_reflect.html#member-accessibleobject" class="sidebar-link">Member &amp; AccessibleObject</a></li><li class="sidebar-sub-header"><a href="/Java/2_reflect.html#field" class="sidebar-link">Field</a></li><li class="sidebar-sub-header"><a href="/Java/2_reflect.html#method" class="sidebar-link">Method</a></li><li class="sidebar-sub-header"><a href="/Java/2_reflect.html#constructor" class="sidebar-link">Constructor</a></li><li class="sidebar-sub-header"><a href="/Java/2_reflect.html#array" class="sidebar-link">Array</a></li></ul></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>SpringBoot</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>设计模式</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="反射"><a href="#反射" aria-hidden="true" class="header-anchor">#</a> 反射</h1> <p>它提供了 Java 语言在运行期间加载、探知和使用编译期间完全未知的类的能力。这种能力在框架的编写中非常常见，例如动态代理中、类扫描解析中。</p> <h2 id="反射的定义与作用"><a href="#反射的定义与作用" aria-hidden="true" class="header-anchor">#</a> 反射的定义与作用</h2> <p>反射机制：即 Java 语言在运行时有一种自观的能力，能够了解自身的情况并为下一步的动作做准备。反应出来就是，在运行时，对于一个类，我们能够知道该类有哪些方法和属性。对于一个对象，我们能够调用其任意的一个方法。这是一种动态获取类的信息以及动态调用对象方法的能力。</p> <h2 id="实现反射的基础"><a href="#实现反射的基础" aria-hidden="true" class="header-anchor">#</a> 实现反射的基础</h2> <p>Java 提供反射机制，依赖于 Class 类和 java.lang.reflect 类库。其主要的类如下：</p> <ol><li>Class：表示类或者接口</li> <li>Field：表示类中的成员变量</li> <li>Method：表示类中的方法</li> <li>Constructor：表示类的构造方法</li> <li>Array：该类提供了动态创建数组和访问数组元素的静态方法</li></ol> <h2 id="class"><a href="#class" aria-hidden="true" class="header-anchor">#</a> Class</h2> <p>Class 类是 Java 中用来表示运行时类型信息的对应类。实际上在 Java 中每个类都有一个 Class 对象，每当我们编写并且编译一个新创建的类就会将相关信息写到 .class 文件里。当我们 new 一个新对象或者引用静态成员变量时，JVM 中的类加载器子系统会将对应 Class 对象加载到 JVM 中，然后 JVM 再根据这个类型信息相关的 Class 对象创建我们需要实例对象或者提供静态变量的引用值。我们可以将 Class 类，称为类类型，一个 Class 对象，称为类类型对象</p> <p>Class 类有以下的特点：</p> <ol><li>Class 类也是类的一种，class 则是关键字。</li> <li>Class 类只有一个私有的构造函数，只有 JVM 能够创建 Class 类的实例。</li> <li>对于同一类的对象，在 JVM 中只有唯一一个对应的 Class 类实例来描述其类型信息。（同一个类：即包名 + 类名相同，且由同一个类加载器加载）</li></ol> <h3 id="获取class实例的方法"><a href="#获取class实例的方法" aria-hidden="true" class="header-anchor">#</a> 获取Class实例的方法</h3> <h4 id="class-forname-方法"><a href="#class-forname-方法" aria-hidden="true" class="header-anchor">#</a> Class.forName()方法</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 这种方式会使用当前的类的加载器加载，并且会将 Class 类实例初始化</span>
Class<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">&gt;</span> clazz <span class="token operator">=</span> Class<span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;java.lang.String&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 上面的调用方式等价于</span>
Class<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">&gt;</span> clazz <span class="token operator">=</span> Class<span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;java.lang.String&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> currentLoader<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>使用该方法可能会抛出 ClassNotFoundException 异常，这个异常发生在类的加载阶段，原因如下：</p> <ol><li>类加载器在类路径中没有找到该类（检查：查看所在加载的类以及其所依赖的包是否在类路径下）</li> <li>该类已经被某个类加载器加载到 JVM 内存中，另外一个类加载器又尝试从同一个包中加载</li></ol> <h4 id="object-getclass-方法"><a href="#object-getclass-方法" aria-hidden="true" class="header-anchor">#</a> Object.getClass()方法</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// String 对象的 getClass 方法</span>
Class <span class="token class-name">clazz1</span> <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 数组对象的 getClass 方法</span>
Class <span class="token class-name">clazz2</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>class2<span class="token punctuation">)</span> <span class="token comment">// 会输出 [B, [ 代表是数组， B 代表是 byte。即 byte 数组的类类型</span>

<span class="token comment">// 若我们知道要获取的类类型的名称时，我们可以使用 class 语法获取该类类型的对象。</span>
<span class="token comment">// 类</span>
Class <span class="token class-name">clazz</span> <span class="token operator">=</span> Integer<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
<span class="token comment">// 数组</span>
Class <span class="token class-name">clazz2</span> <span class="token operator">=</span> <span class="token keyword">int</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="包装类的type静态属性"><a href="#包装类的type静态属性" aria-hidden="true" class="header-anchor">#</a> 包装类的TYPE静态属性</h4> <p>对于基本类型和 void 都有对应的包装类。在包装类中有一个静态属性 TYPE，保存了该来的类类型。</p> <div class="language-java extra-class"><pre class="language-java"><code>Class <span class="token class-name">clazz1</span> <span class="token operator">=</span> Integer<span class="token punctuation">.</span>TYPE<span class="token punctuation">;</span>
Class <span class="token class-name">clazz2</span> <span class="token operator">=</span> Void<span class="token punctuation">.</span>TYPE<span class="token punctuation">;</span>
</code></pre></div><h4 id="class类的方法"><a href="#class类的方法" aria-hidden="true" class="header-anchor">#</a> Class类的方法</h4> <table><thead><tr><th>方法</th> <th>描述</th></tr></thead> <tbody><tr><td>Class.getSuperclass()</td> <td>获取该类的父类</td></tr> <tr><td>Class.getClasses()</td> <td>获取该类所有公共类、接口、枚举组成的Class 数组，包括继承的</td></tr> <tr><td>Class.getDeclaredClasses()</td> <td>获取该类显式声明的所有类、接口、枚举组成的 Class 数组</td></tr> <tr><td>(Class/Field/Method/Constructor).getDeclaringClass()</td> <td>获取该类/属性/方法/构造函数所在的类</td></tr></tbody></table> <h2 id="member-accessibleobject"><a href="#member-accessibleobject" aria-hidden="true" class="header-anchor">#</a> Member &amp; AccessibleObject</h2> <p>在讲 Field、Method、Constructor 之前，先说说 Member 和 AccessibleObject。Member 是一个接口，表示 Class 的成员，前面的三个类都是其实现类。</p> <p>AccessibleObject 是 Field、Method、Constructor 三个类共同继承的父类，它提供了将反射的对象标记为在使用时取消默认 Java 语言访问控制检查的能力。通过 setAccessible 方法可以忽略访问级别，从而访问对应的内容。并且 AccessibleObject 实现了 AnnotatedElement 接口，提供了与获取注解相关的能力。</p> <h2 id="field"><a href="#field" aria-hidden="true" class="header-anchor">#</a> Field</h2> <p>Field 提供了有关类或接口的单个属性的信息，以及对它的动态访问的能力。</p> <p>可以通过 Class 提供的方法，获取 Field 对象，具体如下：</p> <table><thead><tr><th>方法返回值</th> <th>方法名称</th> <th>方法说明</th></tr></thead> <tbody><tr><td>Field</td> <td>getDeclaredField(String name)</td> <td>获取指定name名称的(包含private修饰的)字段，不包括继承的字段</td></tr> <tr><td>Field[]</td> <td>getDeclaredField()</td> <td>获取Class对象所表示的类或接口的所有(包含private修饰的)字段,不包括继承的字段</td></tr> <tr><td>Field</td> <td>getField(String name)</td> <td>获取指定name名称、具有public修饰的字段，包含继承字段</td></tr> <tr><td>Field[]</td> <td>getField()</td> <td>获取修饰符为public的字段，包含继承字段</td></tr></tbody></table> <p>实例</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">public</span> String name<span class="token operator">=</span><span class="token string">&quot;smt&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> String idcard<span class="token operator">=</span><span class="token string">&quot;1001u09t&quot;</span><span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> String <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;name:&quot;</span><span class="token operator">+</span>name<span class="token operator">+</span><span class="token string">&quot;  idcard:&quot;</span><span class="token operator">+</span>idcard<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReflectTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>

        Class <span class="token class-name">clazz</span> <span class="token operator">=</span> Person<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
        Object obj <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 获取Person类所有 公共 成员变量</span>
        Field<span class="token punctuation">[</span><span class="token punctuation">]</span> fields <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span>Field s<span class="token operator">:</span>fields<span class="token punctuation">)</span><span class="token punctuation">{</span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        Field field<span class="token operator">=</span>clazz<span class="token punctuation">.</span><span class="token function">getField</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        field<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">&quot;haha&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>

        Field field2<span class="token operator">=</span>clazz<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">&quot;idcard&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        field2<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        field2<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

输出结果
Person类无参数构造
<span class="token keyword">public</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>String com<span class="token punctuation">.</span>test<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>Person<span class="token punctuation">.</span>name
name<span class="token operator">:</span>haha  idcard<span class="token operator">:</span><span class="token number">1001</span>u09t
name<span class="token operator">:</span>haha  idcard<span class="token operator">:</span><span class="token number">123456</span>
</code></pre></div><h2 id="method"><a href="#method" aria-hidden="true" class="header-anchor">#</a> Method</h2> <p>Method 提供了有关类或接口的单个方法的信息，以及对它的动态访问的能力。</p> <p>可以通过 Class 提供的方法，获取 Field 对象，具体如下：</p> <table><thead><tr><th>方法返回值</th> <th>方法名称</th> <th>方法说明</th></tr></thead> <tbody><tr><td>Method</td> <td>getDeclaredMethod(String name, Class&lt;?&gt;... parameterTypes)</td> <td>返回一个指定参数的Method对象，该对象反映此 Class 对象所表示的类或接口的指定已声明方法。</td></tr> <tr><td>Method[]</td> <td>getDeclaredMethod()</td> <td>返回 Method 对象的一个数组，这些对象反映此 Class 对象表示的类或接口声明的所有方法，包括公共、保护、默认（包）访问和私有方法，但不包括继承的方法。</td></tr> <tr><td>Method</td> <td>getMethod(String name, Class&lt;?&gt;... parameterTypes)</td> <td>返回一个 Method 对象，它反映此 Class 对象所表示的类或接口的指定公共成员方法。</td></tr> <tr><td>Method[]</td> <td>getMethods()</td> <td>返回一个包含某些 Method 对象的数组，这些对象反映此 Class 对象所表示的类或接口（包括那些由该类或接口声明的以及从超类和超接口继承的那些的类或接口）的公共 member 方法。</td></tr></tbody></table> <p>实例</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;show 空参数&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">)</span><span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;show   a:&quot;</span><span class="token operator">+</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span>String s<span class="token punctuation">)</span><span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;show   s:&quot;</span><span class="token operator">+</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReflectTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>


        Class <span class="token class-name">clazz</span> <span class="token operator">=</span> Person<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
        Object obj <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 获取Person类所有 公共 成员方法</span>
        Method <span class="token punctuation">[</span><span class="token punctuation">]</span> methods<span class="token operator">=</span>clazz<span class="token punctuation">.</span><span class="token function">getMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span><span class="token punctuation">(</span>Method m<span class="token operator">:</span>methods<span class="token punctuation">)</span><span class="token punctuation">{</span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        Method m<span class="token operator">=</span>clazz<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">&quot;show&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        m<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>

        Method m1<span class="token operator">=</span>clazz<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">&quot;show&quot;</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        m1<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        Method m2<span class="token operator">=</span>clazz<span class="token punctuation">.</span><span class="token function">getDeclaredMethod</span><span class="token punctuation">(</span><span class="token string">&quot;show&quot;</span><span class="token punctuation">,</span>String<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        m2<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        m2<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token string">&quot;smt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


输出结果：
Person类无参数构造
<span class="token keyword">public</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>String com<span class="token punctuation">.</span>test<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>Person<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> com<span class="token punctuation">.</span>test<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>Person<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> com<span class="token punctuation">.</span>test<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>Person<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>Object<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>InterruptedException
<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">native</span> <span class="token keyword">void</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>Object<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>InterruptedException
<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>Object<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>InterruptedException
<span class="token keyword">public</span> <span class="token keyword">boolean</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>Object<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>Object<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">native</span> <span class="token keyword">int</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>Object<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">native</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>Class <span class="token class-name">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>Object<span class="token punctuation">.</span>getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">native</span> <span class="token keyword">void</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>Object<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">native</span> <span class="token keyword">void</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>Object<span class="token punctuation">.</span><span class="token function">notifyAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
show 空参数
show   a<span class="token operator">:</span><span class="token number">1</span>
show   s<span class="token operator">:</span>smt
</code></pre></div><h2 id="constructor"><a href="#constructor" aria-hidden="true" class="header-anchor">#</a> Constructor</h2> <p>Constructor 提供了有关类的构造方法的信息，以及对它的动态访问的能力。</p> <p>可以通过 Class 提供的方法，获取 Constructor 对象，具体如下：</p> <table><thead><tr><th>方法返回值</th> <th>方法名称</th> <th>方法说明</th></tr></thead> <tbody><tr><td><code>Constructor&lt;T&gt;</code></td> <td><code>getConstructor(Class&lt;?&gt;... parameterTypes)</code></td> <td>返回指定参数类型、具有public访问权限的构造函数对象</td></tr> <tr><td><code>Constructor&lt;?&gt;[]</code></td> <td><code>getConstructors()</code></td> <td>返回所有具有public访问权限的构造函数的Constructor对象数组</td></tr> <tr><td><code>Constructor&lt;T&gt;</code></td> <td><code>getDeclaredConstructor(Class&lt;?&gt;... parameterTypes)</code></td> <td>返回指定参数类型、所有声明的（包括private）构造函数对象</td></tr> <tr><td><code>Constructor&lt;?&gt;[]</code></td> <td><code>getDeclaredConstructor()</code></td> <td>返回所有声明的（包括private）构造函数对象</td></tr></tbody></table> <p>实例：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Person类无参数构造&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> b<span class="token punctuation">,</span>String s<span class="token punctuation">)</span><span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Person类有参数构造：a:&quot;</span><span class="token operator">+</span>a<span class="token operator">+</span><span class="token string">&quot; b:&quot;</span><span class="token operator">+</span>b<span class="token operator">+</span><span class="token string">&quot; s:&quot;</span><span class="token operator">+</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">)</span><span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Person类有参数   私有 构造：a:&quot;</span><span class="token operator">+</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReflectTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>

        Class <span class="token class-name">clazz</span><span class="token operator">=</span>Person<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
        <span class="token comment">//获取Person类所有 公共 构造</span>
        Constructor <span class="token punctuation">[</span><span class="token punctuation">]</span> conarr<span class="token operator">=</span>clazz<span class="token punctuation">.</span><span class="token function">getConstructors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span>Constructor con <span class="token operator">:</span>conarr<span class="token punctuation">)</span><span class="token punctuation">{</span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>con<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//获取指定构造方法</span>
        <span class="token comment">//无参数</span>
        Constructor cc<span class="token operator">=</span>clazz<span class="token punctuation">.</span><span class="token function">getConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Object oo<span class="token operator">=</span>cc<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//有参数</span>
        Constructor cc2<span class="token operator">=</span>clazz<span class="token punctuation">.</span><span class="token function">getConstructor</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>String<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Object oo2<span class="token operator">=</span>cc2<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&quot;haha&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//获取私有构造方法</span>
        Constructor cc3<span class="token operator">=</span>clazz<span class="token punctuation">.</span><span class="token function">getDeclaredConstructor</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//暴力访问</span>
        cc3<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Object oo3<span class="token operator">=</span>cc3<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        clazz<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//直接获取空参数构造，必须是public</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

输出结果
<span class="token keyword">public</span> com<span class="token punctuation">.</span>test<span class="token punctuation">.</span>demo<span class="token punctuation">.</span><span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> com<span class="token punctuation">.</span>test<span class="token punctuation">.</span>demo<span class="token punctuation">.</span><span class="token function">Person</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token punctuation">,</span>java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>String<span class="token punctuation">)</span>
Person类无参数构造
Person类有参数构造：a<span class="token operator">:</span><span class="token number">1</span> b<span class="token operator">:</span><span class="token number">2</span> s<span class="token operator">:</span>haha
Person类有参数   私有 构造：a<span class="token operator">:</span><span class="token number">1</span>
Person类无参数构造
</code></pre></div><h2 id="array"><a href="#array" aria-hidden="true" class="header-anchor">#</a> Array</h2> <p>在 Java 中数组也是一种类，Array 提供了动态创建数组和访问数组元素的静态方法。</p> <p>通过 <code>getXXX(Object array, int index)</code> 方法，传入数组对象和下标索引，可以获取到该位置的值。</p> <p>通过 <code>newInstance(Class&lt;?&gt; componentType, int length)</code> 方法，传入数组类型和长度，创建数组。如下：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 下面创建的两个数组等价</span>
<span class="token keyword">int</span> x<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> y<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> Array<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 输出 true</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>length <span class="token operator">==</span> y<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
复制代码
</code></pre></div><p>通过 <code>newInstance(Class&lt;?&gt; componentType, int... dimensions)</code> 方法，创建多维数组。如下：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 下面创建的两个数组等价</span>
<span class="token keyword">int</span> x<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> y<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> Array<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 输出 true</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>length <span class="token operator">==</span> y<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/luzhangfei/LuNote/edit/master/docs/Java/2_reflect.md" target="_blank" rel="noopener noreferrer">编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">5/7/2019, 7:20:17 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/Java/1_annotations.html" class="prev">
          注解
        </a></span> <span class="next"><a href="/Java/SpringBoot/1.1属性配置文件说明.html">
          1.1属性配置文件说明
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/7.de8dbbc3.js" defer></script><script src="/assets/js/app.87228582.js" defer></script>
  </body>
</html>
